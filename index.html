<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Yatharth Garg</title>

  <!-- 1) Immediately apply saved theme BEFORE any CSS loads -->
  <script>
    (function() {
      try {
        var theme = localStorage.getItem('theme');
        if (!theme) {
          theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
          localStorage.setItem('theme', theme);
        }
        document.documentElement.classList.toggle('dark-mode', theme === 'dark');
      } catch (e) {}
    })();
  </script>

  <!-- 2) Favicon & main stylesheet -->
  <link rel="icon" href="images/thumbs/icon.png" type="image/icon type" />
  <link rel="stylesheet" href="assets/css/main.css" />

  <!-- 3) Theme vars & toggle styling -->
  <style>
    :root {
      --bg-color: #ffffff;
      --text-color: #1f1f1f;
      --link-color: #49bf9d;
    }
    html.dark-mode {
      --bg-color: #1a1a1a;
      --text-color: #f5f5f5;
    }
    body {
      background: var(--bg-color);
      color: var(--text-color);
      transition: background 0.3s ease, color 0.3s ease;
    }
    a { color: var(--link-color); transition: color 0.3s ease; }

    /* Icon‚Äëonly theme toggle */
    #theme-toggle {
      position: fixed; top:1rem; right:1rem;
      background: none; border: none;
      font-size:1.5rem; color:var(--text-color);
      cursor:pointer; z-index:9999; padding:0; line-height:1;
    }
    #theme-toggle:focus { outline: none; }

    /* Header location link */
    #header .location a {
      color: inherit !important;
      text-decoration: none;
      font-size:0.9em; opacity:0.8;
    }
  </style>
</head>

<body class="is-preload">

  <!-- Header -->
  <header id="header">
    <div class="inner">
      <a href="#" class="image avatar"><img src="images/resume.jpg" alt="" /></a>
      <h1><strong>YATHARTH GARG</strong></h1>
      <p class="location"><a href="https://www.google.com/search?q=Atlanta%2C+GA">üìç Atlanta, Georgia, US üá∫üá∏</a></p>
      <h5><a href="/">Home</a></h5>
      <h5><a href="/projects/">Projects</a></h5>
      <h5><a href="/resume/">Resume</a></h5>
    </div>
  </header>

  <!-- Theme toggle button -->
  <button id="theme-toggle" title="Toggle dark mode">
    <i class="fas fa-moon"></i>
  </button>

  <!-- Main Content -->
  <div id="main">

    <!-- One -->
    <section id="one">
      <header class="major">
        <h2 id="about-animated"></h2>
        <h2 id="sequence" style="font-size:1.75em; font-weight:normal; margin-top:0.2em;"></h2>
      </header>

      <script>
        // Animate "Learn about me!"
        const aboutWords = ["Learn","about","me!"];
        const aboutElem  = document.getElementById("about-animated");
        let   aboutIdx   = 0;
        function showNextWord(){
          if(aboutIdx < aboutWords.length){
            aboutElem.innerHTML += (aboutIdx? " ":"") +
              `<span style="opacity:0;display:inline-block;transform:translateY(10px);transition:all .25s;">${aboutWords[aboutIdx]}</span>`;
            setTimeout(()=>{
              const spans = aboutElem.querySelectorAll("span");
              spans[aboutIdx].style.opacity = 1;
              spans[aboutIdx].style.transform = "translateY(0)";
              aboutIdx++;
              setTimeout(showNextWord,120);
            },10);
          }
        }
        showNextWord();

        // Animated hellos
        const hellos = ['Hello','‡§®‡§Æ‡§∏‡•ç‡§§‡•á','Hola','Salut','Ciao','Hallo','‰Ω†Â•Ω','„Åì„Çì„Å´„Å°„ÅØ','–ü—Ä–∏–≤–µ—Ç','ÏïàÎÖïÌïòÏÑ∏Ïöî','Ol√°'];
        let seqFirst = true;
        function textSequence(i){
          const seqEl = document.getElementById("sequence");
          const delay = seqFirst ? 0 : 1000;
          seqFirst = false;
          if(i < hellos.length){
            setTimeout(()=>{
              seqEl.textContent = hellos[i];
              textSequence(i+1);
            }, delay);
          } else textSequence(0);
        }
        textSequence(0);
      </script>

      <p>
        Senior Principal Software Engineer ‚Üí Manhattan Associates<br>
        delhi ‚Ä¢ dallas ‚Ä¢ atlanta<br>
        7+ years in machine learning and software engineering<br>
        coffee ‚Ä¢ coding ‚Ä¢ basketball ‚Ä¢ tennis<br>
      </p>
    </section>

    <!-- Total viewers counter -->
    <div id="views-section" style="text-align:center; margin:40px 0 0 0;">
      <h3 style="margin-bottom:10px; color:#888;">Total viewers</h3>
      <div id="rolling-counter" style="font-size:2.5em; font-weight:bold; color:#444; letter-spacing:0.1em;">0</div>
    </div>

  </div>

  <!-- Footer -->
  <footer id="footer">
    <div class="inner">
      <ul class="icons">
        <li><a href="https://github.com/yatharthgarg" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
        <li><a href="https://linkedin.com/in/yatharthgarg" class="icon brands fa-linkedin"><span class="label">LinkedIn</span></a></li>
        <li><a href="files/YatharthGarg_CV.pdf" class="icon solid fa-file-alt"><span class="label">Resume</span></a></li>
        <li><a href="mailto:ygarg020@gmail.com" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
      </ul>
    </div>
  </footer>

  <!-- Core scripts -->
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/jquery.poptrox.min.js"></script>
  <script src="assets/js/browser.min.js"></script>
  <script src="assets/js/breakpoints.min.js"></script>
  <script src="assets/js/util.js"></script>
  <script src="assets/js/main.js"></script>

  <!-- GoatCounter: fetch and animate unique visitors -->
  <script data-goatcounter="https://yatharthgarg.goatcounter.com/count"
          async src="//gc.zgo.at/count.js"></script>
  <script>
    function animateCounter(el, start, end, dur) {
      let t0 = null;
      function step(ts) {
        if (!t0) t0 = ts;
        const prog = Math.min((ts - t0)/dur, 1);
        el.textContent = Math.floor(prog*(end-start)+start).toLocaleString();
        if(prog < 1) window.requestAnimationFrame(step);
        else el.textContent = end.toLocaleString();
      }
      window.requestAnimationFrame(step);
    }

    // On DOM ready, pull unique visitors count
    document.addEventListener("DOMContentLoaded", () => {
      fetch("https://yatharthgarg.goatcounter.com/api/v0/stats")
        .then(res => res.json())
        .then(data => {
          const unique = data.totals?.["/"]?.unique || 0;
          animateCounter(
            document.getElementById("rolling-counter"),
            0,
            unique,
            1200
          );
        })
        .catch(() => {
          document.getElementById("rolling-counter").textContent = "0";
        });
    });
  </script>

  <!-- Theme toggle logic -->
  <script>
    (function(){
      const toggle = document.getElementById("theme-toggle"),
            icon   = toggle.querySelector("i");

      // Set initial icon
      const cur = localStorage.getItem("theme");
      if(cur === "dark") icon.classList.replace("fa-moon","fa-sun");

      toggle.addEventListener("click", () => {
        const isDark = document.documentElement.classList.toggle("dark-mode");
        localStorage.setItem("theme", isDark?"dark":"light");
        icon.classList.replace(isDark?"fa-moon":"fa-sun", isDark?"fa-sun":"fa-moon");
      });
    })();
  </script>
</body>
</html>
